# 운영체제

## 프로세스와 스레드
### 프로세스
프로세스는 수행중인 프로그램으로 디스크에서 메모리로 적재되어 실행중인 프로그램이다.

#### 프로세스 제어 블록
프로세스 제어 블록(PCB : Process Control Block)이란 운영체제가 시스템 내의 프로세스들을 관리하기 위해 프로세스당 유지하는 정보들을 담는 커낼 내의 자료 구조이다.
- 프로세스 식별자
- 프로세스의 상태
- 프로그램 카운터 값
- CPU 레지스터
- CPU 스케줄링 정보
- 메모리 관리 정보
- 자원 사용 정보
- 입출력 상태 정보

#### 문맥 교환
문맥 교환은 하나의 프로세스로부터 다른 프로세스로 CPU의 제어권을 이양하기 위해 현재 프로세스의 문맥을 자신의 PCB에 저장하고 새로 CPU를 할당받을 프로세스의 문맥을 하드웨어로 복원시키는 작업을 말한다.  
  
시스템 콜과 인터럽트가 발생(IO 요청, 타이머 인터럽트 제외)하면 CPU의 제어권이 운영체제 커널에게로 넘어가지만 프로세스가 다른 프로세스로 변경되는 과정이 아니므로 이를 문맥 교환이라고 하지 않고 모드 변경이라고 한다.

### 스레드
스레드는 프로세스 내에서 독립적으로 실행되는 작업 단위를 말하며 프로세스의 자원을 공유하고 각자 스택 영역을 가진다. 
각자 스택 영역을 가지는 이유는 스레드마다 독립적으로 메서드를 호출이 가능하도록 하여 독립적인 실행 흐름을 가지도록 하기 위해서이다.

#### 멀티 스레드
**장점**
- CPU 사용률을 향상시킨다.
- 메모리 공유를 통해 자원을 효율적으로 사용할 수 있다.
- 여러 스레드에서 각기 다른 작업을 하게 함으로써 응답성이 향상된다.
- 프로세스 생성에 많은 시간과 자원이 소요되므로 경제적이다.

**단점**
- 메모리를 공유하므로 동기화, 교착상태와 같은 문제들을 고려해야한다.
- 하나의 스레드에서 문제가 발생해도 전체 프로세스가 영향을 받는다.

## 스케줄러
### 장기 스케줄러
장기 스케줄러는 작업 스케줄러라고도 부르며 어떤 프로세스를 준비 큐에 삽입할지를 결정하는 역할을 한다. 
즉 프로세스에게 메모리를 할당하는 문제에 관여를 하며 메모리에 동시에 올라가 있는 프로세스의 수를 조절한다.  
그러나 현대의 시분할 시스템에서는 장기 스케줄러를 두지 않고 곧바로 프로세스에게 메모리를 할당해 준비 큐에 넣어준다.

### 단기 스케줄러
단기 스케줄러는 CPU 스케줄러라고도 하며 준비 상태의 프로세스 중에서 어떤 프로세스를 실행 상태로 만들 것인지를 결정한다. 즉 준비 큐에 있는 프로세스들 중에 어떤 프로세스에게 CPU를 할당할 것인가를 결정하게 된다.

### 중기 스케줄러
메모리에 적재된 프로세스의 수가 너무 많아 성능이 저하되는 경우 프로세스의 수를 조절하기 위해 추가된 스케줄러이다. 
즉 프로세스당 보유 메모리량이 지나치게 적어진 경우 이를 완화하기 위해 일부 프로세스를 메모리에서 디스크로 스왑 아웃 시키는 역할을 수행한다.  
  
cf) **중지 상태**(suspended, stopped) : 중기 스케줄러의 등장으로 실행, 준비, 봉쇄 외에 하나의 프로세스 상태가 추가되었는데 외부적인 이유로 프로세스의 수행이 정지된 상태인 중지 상태이다.

## CPU 스케줄링 알고리즘
### FCFS(First Come First Served)
**특징**
- 비선점형 스케줄링
- 준비 큐에 도착한 시간 순서대로 CPU를 할당하는 방식

**문제점**
- CPU 버스트가 긴 프로세스가 먼저 도착하면 평균 대기 시간 증가

### SJF(Shortest Job First)
**특징**
- 비선점형 스케줄링
- CPU 버스트가 가장 짧은 프로세스에게 CPU를 할당하는 방식

**문제점**
- 기아 현상(starvation) : CPU 버스트가 짧은 프로세스가 계속 도착할 경우 CPU 버스트가 긴 프로세스는 영원히 CPU를 할당받지 못한다.

### SRTF(Shortest Remaining Time First)
**특징**
- 선점형 스케줄링
- SJF의 선점형 방식으로 현재 CPU에서 실행중인 프로세스의 남은 CPU 버스트 시간보다 더 짧은 CPU 버스트 시간을 가지는 프로세스가 도착하면 CPU를 뺏긴다.

**문제점**
- starvation

### 우선순위 스케줄링(Priority Scheduling)
**특징**
- 선점형/비선점형 스케줄링
- 우선순위가 높은 프로세스에게 제일 먼저 CPU를 할당하는 방식
- 우선순위값이 작을수록 높은 우선순위를 가진다.

**문제점**
- starvation

**해결방안**
- aging : 기다리는 시간이 길어지면 우선순위를 조금씩 높여 CPU를 할당받을 수 있게 해주는 방법

### Round Robin
**특징**
- 각 프로세스마다 동일한 할당 시간을 두어 이 시간이 경과하면 프로세스로부터 CPU를 회수해 준비 큐에 있는 다른 프로세스에게 CPU 할당
- 할당 시간이 지난 프로세스는 준비 큐의 제일 뒤에 가서 줄을 선다.
- 대기 시간이 CPU 버스트 시간에 비례하기 때문에 합리적인 알고리즘
- 할당 시간이 너무 길면 FCFS와 같은 결과가 나타나고 너무 짧으면 문맥 교환의 오버헤드가 커진다.

## 메모리 관리

## 가상 메모리
